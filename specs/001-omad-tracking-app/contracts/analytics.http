### Analytics Endpoints
### Weight trends, alcohol correlation, smart gap-filling

@baseUrl = https://localhost:7001
@apiBaseUrl = {{baseUrl}}/api

###
# 1. Get Weight & Alcohol Trends (US4 - Combo Chart)
# Retrieve time-series data for visualization
GET {{apiBaseUrl}}/analytics/trends?startDate=2025-09-01&endDate=2025-11-30
Cookie: .AspNetCore.Identity.Application={session_cookie}
# Returns: 200 OK
# {
#   "dataPoints": [
#     {
#       "date": "2025-09-01",
#       "weight": 180.0,
#       "alcoholConsumed": false,
#       "gapFilled": false
#     },
#     {
#       "date": "2025-09-02",
#       "weight": 179.5,
#       "alcoholConsumed": false,
#       "gapFilled": false
#     },
#     {
#       "date": "2025-09-03",
#       "weight": 179.5,
#       "alcoholConsumed": false,
#       "gapFilled": true
#     },
#     {
#       "date": "2025-09-04",
#       "weight": 178.0,
#       "alcoholConsumed": true,
#       "gapFilled": false
#     }
#     // ... up to 90 days
#   ],
#   "summary": {
#     "startWeight": 180.0,
#     "endWeight": 170.0,
#     "totalWeightChange": -10.0,
#     "averageDailyChange": -0.11,
#     "daysLogged": 82,
#     "daysWithAlcohol": 15,
#     "alcoholCorrelation": 0.45
#   }
# }

###
# 2. Get Default Trends (Last 90 Days)
# If user doesn't specify date range, default to last 90 days
GET {{apiBaseUrl}}/analytics/trends
Cookie: .AspNetCore.Identity.Application={session_cookie}
# Returns: 200 OK (same structure as #1)

###
# 3. Insufficient Data Scenario (FR-004 - < 3 days)
# User has only 2 logged days
GET {{apiBaseUrl}}/analytics/trends
Cookie: .AspNetCore.Identity.Application={session_cookie}
# Returns: 200 OK
# {
#   "dataPoints": [],
#   "summary": {
#     "insufficientData": true,
#     "message": "Log at least 3 days to see your trends",
#     "daysLogged": 2,
#     "daysNeeded": 1
#   }
# }

###
# 4. Gap-Filling Logic Example (FR-011)
# User logged Sept 1, Sept 2, Sept 5 (missing Sept 3-4)
# GET {{apiBaseUrl}}/analytics/trends?startDate=2025-09-01&endDate=2025-09-05
# Returns:
# {
#   "dataPoints": [
#     { "date": "2025-09-01", "weight": 180.0, "gapFilled": false },
#     { "date": "2025-09-02", "weight": 179.5, "gapFilled": false },
#     { "date": "2025-09-03", "weight": 179.5, "gapFilled": true },
#     { "date": "2025-09-04", "weight": 179.5, "gapFilled": true },
#     { "date": "2025-09-05", "weight": 178.0, "gapFilled": false }
#   ]
# }

###
# 5. Alcohol Correlation Calculation
# How is alcoholCorrelation computed?
# Formula: Pearson correlation between alcohol consumption (0/1) and next-day weight change
# Example interpretation:
# - 0.45 = Moderate positive correlation (alcohol days â†’ weight gain)
# - -0.10 = Weak negative correlation (alcohol doesn't affect weight)
# - 0.80 = Strong positive correlation (alcohol strongly predicts weight gain)

###
# 6. Export Data (Optional Future Feature)
# Allow user to download CSV for external analysis
GET {{apiBaseUrl}}/analytics/export?format=csv
Cookie: .AspNetCore.Identity.Application={session_cookie}
# Returns: 200 OK
# Content-Type: text/csv
# Content-Disposition: attachment; filename="poomad-export-2025-11-22.csv"
# 
# Date,OMAD Compliant,Alcohol Consumed,Weight (lbs)
# 2025-09-01,true,false,180.0
# 2025-09-02,true,false,179.5
# ...
